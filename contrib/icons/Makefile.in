##
# icons Makefile fragment
##

.PHONY: ${icons}_clean

.SUFFIXES: .rc

icons_src = contrib/icons
icons_obj = contrib/icons/.build

icons = ${icons_obj}/icons.o

icons_objs = ${icons_obj}/quantump.o

${icons_obj}/%.o: ${icons_src}/%.rc
ifeq (${V},1)
	${WINDRES} -i $< -o $@
else
	@echo "  WINDRES " $<
	@${WINDRES} -i $< -o $@
endif

ifeq (${EMBED_ICONS},1)
${icons}: ${icons_obj} ${icons_objs}
ifeq (${V},1)
	cp ${icons_objs} ${icons}
else
	@echo "  CP      " ${icons_objs} ${icons}
	@cp ${icons_objs} ${icons}
endif
else
${icons}:
	@echo "--> Embedding of icon branding disabled."
endif

${icons}_clean:
	@echo "  RM      " ${icons_obj}
	@rm -rf ${icons_objs}
